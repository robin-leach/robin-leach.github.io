<!DOCTYPE html>
<html>
  <head>
    <script
      type="text/javascript"
      charset="UTF-8"
      src="//cdn.cookie-script.com/s/d9aae17bd6966284aff81be19b156399.js"
    ></script>
    <!-- Google Tag Manager -->
    <script id="ga-script" type="text/plain">
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-P5WWB2P");
    </script>
    <!-- End Google Tag Manager -->
    <!-- Hotjar Tracking Code for https://robin-leach.github.io/ -->
    <script id="hj-script" type="text/plain">
      (function (h, o, t, j, a, r) {
        h.hj =
          h.hj ||
          function () {
            (h.hj.q = h.hj.q || []).push(arguments);
          };
        h._hjSettings = { hjid: 2834198, hjsv: 6 };
        a = o.getElementsByTagName("head")[0];
        r = o.createElement("script");
        r.async = 1;
        r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
        a.appendChild(r);
      })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");
    </script>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-P5WWB2P"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <h1>Example heading</h1>
    <p>Example paragraph</p>
    <button id="myButton">Example button</button>

    <script type="text/javascript">
      function refreshScriptTypes() {
        var cookies = document.cookie.split("; ").map(function (c) {
          return c.split("=");
        });
        var csCookie = cookies.find(function (c) {
          return (c[0] = "CookieScriptConsent");
        });
        if (csCookie) {
          var value = JSON.parse(csCookie[1]);
          console.log("cookie is ", value);
          if (
            value.action === "accept" &&
            value.categories.includes("functionality")
          ) {
            console.log("accepted functionality");
            var gaScript = document.getElementById("ga-script");
            gaScript.type = "text/javascript";
            var hjScript = document.getElementById("hj-script");
            hjScript.type = "text/javascript";
          } else if (value.action === "reject") {
            console.log("rejected");
            var gaScript = document.getElementById("ga-script");
            gaScript.type = "text/plain";
            var hjScript = document.getElementById("hj-script");
            hjScript.type = "text/plain";
          }
        }
      }
      document.getElementById("myButton").onclick = refreshScriptTypes;
    </script>
  </body>
</html>
